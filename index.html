<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Actualizaci√≥n Docente - ITD</title>
    <meta name="description" content="Portal oficial de la Coordinaci√≥n de Actualizaci√≥n Docente del Instituto Tecnol√≥gico de Durango.">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/DA-itd/web/main/logo_itdurango.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: {
                        'fadeInUp': 'fadeInUp 0.8s ease-out forwards',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .grayscale-card {
            filter: grayscale(100%);
            opacity: 0.7;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.4",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "react-router-dom": "https://esm.sh/react-router-dom@^7.13.0",
    "react/": "https://esm.sh/react@^19.2.4/"
  }
}
</script>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col font-sans">

    <!-- Contenedor Ra√≠z de React -->
    <div id="root" class="flex-grow"></div>

    <!-- L√≥gica de la Aplicaci√≥n -->
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Configuraci√≥n Administrativa ---
        const ADMIN_EMAIL = 'alejandro.calderon@itdurango.edu.mx';
        const GOOGLE_CLIENT_ID = '524996225715-5l95j3lces5hi49c19rfgotdrfo2seq1.apps.googleusercontent.com';

        // --- Datos Est√°ticos ---
        const quotes = [
            { text: "La educaci√≥n es el arma m√°s poderosa que puedes usar para cambiar el mundo.", author: "Nelson Mandela" },
            { text: "La ciencia es una forma de pensar mucho m√°s que un cuerpo de conocimientos.", author: "Carl Sagan" },
            { text: "La educaci√≥n no es preparaci√≥n para la vida; la educaci√≥n es la vida misma.", author: "John Dewey" },
            { text: "La mente que se abre a una nueva idea jam√°s volver√° a su tama√±o original.", author: "Albert Einstein" },
            { text: "El objetivo de la educaci√≥n es la virtud y el deseo de convertirse en un buen ciudadano.", author: "Plat√≥n" }
        ];

        // --- Componente: ServiceCard ---
        const ServiceCard = ({ option, onClick }) => {
            const isDisabled = option.isDisabled;
            
            return (
                <a 
                    href={isDisabled ? '#' : option.link}
                    onClick={isDisabled ? (e) => e.preventDefault() : onClick}
                    className={`
                        block bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 text-center 
                        border-2 transition-all duration-300 transform group relative overflow-hidden
                        ${isDisabled 
                            ? 'border-gray-200 grayscale-card cursor-not-allowed' 
                            : `border-transparent hover:${option.borderColorClass} hover:-translate-y-1 hover:shadow-xl`
                        }
                    `}
                >
                    <div className={`text-4xl sm:text-5xl mb-4 transition-transform duration-300 ${!isDisabled && 'group-hover:scale-110'}`}>
                        {option.icon}
                    </div>
                    
                    <h3 className="text-lg font-bold text-slate-800 dark:text-white mb-2">
                        {option.title}
                    </h3>
                    
                    <p className="text-xs sm:text-sm text-slate-600 dark:text-slate-300 mb-4">
                        {option.description}
                    </p>
                    
                    {option.badge && (
                        <div className="absolute top-4 right-4 animate-pulse">
                            <span className="bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-sm">
                                {option.badge}
                            </span>
                        </div>
                    )}

                    <div className={`
                        inline-block text-xs font-semibold px-3 py-1 rounded-full
                        ${isDisabled ? 'bg-gray-200 text-gray-500' : option.statusColor}
                    `}>
                        {isDisabled ? 'üîí Cerrado' : (option.statusText || 'Disponible')}
                    </div>
                </a>
            );
        };

        // --- Componente Principal: Home ---
        const Home = () => {
            const [currentQuote, setCurrentQuote] = useState(quotes[0]);
            const [fadeQuote, setFadeQuote] = useState(true);
            
            // Estado Persistente de Inscripciones
            const [inscriptionsOpen, setInscriptionsOpen] = useState(() => {
                const stored = localStorage.getItem('INSCRIPTIONS_STATUS');
                // Por defecto ABIERTO si es null, o lo que diga localStorage
                return stored === null ? true : (stored === 'OPEN');
            });

            // Efecto para rotar frases
            useEffect(() => {
                const interval = setInterval(() => {
                    setFadeQuote(false);
                    setTimeout(() => {
                        setCurrentQuote(prev => {
                            const idx = quotes.indexOf(prev);
                            return quotes[(idx + 1) % quotes.length];
                        });
                        setFadeQuote(true);
                    }, 500);
                }, 10000);
                return () => clearInterval(interval);
            }, []);

            // Efecto para Inicializar Google (Solo si no est√° cargado)
            useEffect(() => {
                if (window.google) return;
                // El script ya est√° en el head, pero aseguramos inicializaci√≥n si fuera necesario
            }, []);

            // --- Rutina de Administrador (Huevo de Pascua) ---
            const handleAdminTrigger = () => {
                if (!window.google) {
                    alert("Cargando servicios de seguridad...");
                    return;
                }

                // Callback al autenticarse
                const handleCredentialResponse = (response) => {
                    try {
                        const payload = JSON.parse(atob(response.credential.split('.')[1]));
                        
                        if (payload.email === ADMIN_EMAIL) {
                            const newState = !inscriptionsOpen;
                            setInscriptionsOpen(newState);
                            localStorage.setItem('INSCRIPTIONS_STATUS', newState ? 'OPEN' : 'CLOSED');
                            
                            alert(`‚úÖ ADMINISTRADOR VERIFICADO\n\nEstado actualizado:\nLas inscripciones ahora est√°n ${newState ? 'ABIERTAS' : 'CERRADAS'}.`);
                        } else {
                            alert(`‚õî ACCESO DENEGADO\n\nEl usuario ${payload.email} no tiene permisos de administrador.`);
                        }
                    } catch (e) {
                        console.error("Error admin auth", e);
                    }
                };

                // Inicializar Google
                window.google.accounts.id.initialize({
                    client_id: GOOGLE_CLIENT_ID,
                    callback: handleCredentialResponse,
                    auto_select: false
                });

                // Forzar el prompt
                window.google.accounts.id.prompt((notification) => {
                    if (notification.isNotDisplayed()) {
                        console.log("Prompt no mostrado, raz√≥n:", notification.getSkippedReason());
                        // Si falla el prompt flotante, intentar renderizar un bot√≥n oculto y clickearlo (fallback avanzado)
                        alert("Por favor, habilita las ventanas emergentes o limpia cookies para iniciar sesi√≥n como admin.");
                    }
                });
            };

            // Lista Din√°mica de Servicios
            const services = useMemo(() => [
                {
                    id: 'planificador',
                    title: 'Planificador de Clases',
                    description: 'Dise√±a secuencias did√°cticas con IA',
                    icon: '‚ú®',
                    link: 'planificador.html',
                    badge: '¬°NUEVO!',
                    statusText: 'Herramienta IA',
                    statusColor: 'bg-indigo-100 text-indigo-700',
                    borderColorClass: 'border-indigo-500'
                },
                {
                    id: 'tutor',
                    title: 'Tutor Pedag√≥gico',
                    description: 'Resuelve dudas pedag√≥gicas con IA',
                    icon: 'ü§ñ',
                    link: 'tutor.html',
                    badge: '¬°NUEVO!',
                    statusText: 'Asistente IA',
                    statusColor: 'bg-blue-100 text-blue-700',
                    borderColorClass: 'border-blue-500'
                },
                {
                    id: 'inscripciones',
                    title: 'Inscripci√≥n a Cursos',
                    // L√ìGICA DIN√ÅMICA DE TEXTO
                    description: inscriptionsOpen ? 'Registrarse en cursos de actualizaci√≥n' : 'El periodo de inscripciones ha finalizado',
                    icon: 'üìù',
                    link: 'inscripciones.html',
                    statusText: '‚úì Disponible',
                    statusColor: 'bg-rose-100 text-rose-700',
                    borderColorClass: 'border-rose-400',
                    // PROPIEDAD DE DESHABILITADO
                    isDisabled: !inscriptionsOpen
                },
                {
                    id: 'historial',
                    title: 'Historial de Cursos',
                    description: 'Ver mi historial de actualizaci√≥n',
                    icon: 'üìö',
                    link: 'historial.html',
                    statusText: '‚úì Disponible',
                    statusColor: 'bg-orange-100 text-orange-700',
                    borderColorClass: 'border-orange-400'
                },
                {
                    id: 'formatos',
                    title: 'Formatos Oficiales',
                    description: 'Descargar formatos y documentos',
                    icon: 'üìã',
                    link: 'formatos.html',
                    statusText: '‚úì Disponible',
                    statusColor: 'bg-green-100 text-green-700',
                    borderColorClass: 'border-green-400'
                },
                {
                    id: 'verificador',
                    title: 'Validaci√≥n de Constancias',
                    description: 'Verificar la autenticidad de documentos.',
                    icon: '‚úÖ',
                    link: 'verificador.html',
                    statusText: '‚úì Disponible',
                    statusColor: 'bg-cyan-100 text-cyan-700',
                    borderColorClass: 'border-cyan-400'
                },
                {
                    id: 'instructores',
                    title: '√Årea para Instructores',
                    description: 'Subir propuestas y evidencias',
                    icon: 'üë®‚Äçüè´',
                    link: 'instructores.html',
                    statusText: '‚úì Disponible',
                    statusColor: 'bg-indigo-100 text-indigo-700',
                    borderColorClass: 'border-indigo-400'
                },
                {
                    id: 'encuestas',
                    title: 'Encuestas de Opini√≥n',
                    description: 'Evaluaci√≥n de cursos y servicios',
                    icon: 'üìä',
                    link: 'encuestas.html',
                    statusText: '‚úì Disponible',
                    statusColor: 'bg-yellow-100 text-yellow-700',
                    borderColorClass: 'border-yellow-400'
                }
            ], [inscriptionsOpen]);

            return (
                <div id="inicio" className="container mx-auto px-4 py-8 sm:py-12">
                    
                    {/* Secci√≥n de Frases */}
                    <section className="max-w-4xl mx-auto mb-8 animate-[fadeInUp_0.5s_ease-out_forwards]">
                        <div className={`
                            rounded-lg p-6 text-center transition-opacity duration-500 ease-in-out
                            bg-gradient-to-br from-indigo-50/50 to-purple-50/50 border-l-4 border-indigo-400
                            ${fadeQuote ? 'opacity-100' : 'opacity-0'}
                        `}>
                            <p className="text-base sm:text-lg italic text-gray-700 leading-relaxed">
                                "{currentQuote.text}"
                            </p>
                            <p className="text-sm sm:text-base text-gray-600 text-right mt-2">
                                - {currentQuote.author}
                            </p>
                        </div>
                    </section>

                    {/* T√≠tulo Principal */}
                    <div id="servicios" className="text-center mb-8 sm:mb-12 animate-[fadeInUp_0.6s_ease-out_forwards]">
                        <div className="flex items-baseline justify-center gap-4 sm:gap-6 mb-4">
                            <div className="inline-block animate-pulse-slow">
                                <div className="text-6xl sm:text-7xl md:text-8xl">üéì</div>
                            </div>
                            <h2 className="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800">
                                Servicios Disponibles
                            </h2>
                        </div>
                        
                        <div className="mb-4">
                            {inscriptionsOpen ? (
                                <span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    <span className="w-2 h-2 mr-1 bg-green-500 rounded-full animate-pulse"></span>
                                    Inscripciones Abiertas
                                </span>
                            ) : (
                                <span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600">
                                    <span className="w-2 h-2 mr-1 bg-gray-400 rounded-full"></span>
                                    Inscripciones Cerradas
                                </span>
                            )}
                        </div>

                        <p className="text-base sm:text-lg md:text-xl text-gray-600 max-w-3xl mx-auto px-4 mt-2">
                            Seleccione la opci√≥n que necesite para acceder a los diferentes servicios
                        </p>
                    </div>

                    {/* Grid de Servicios */}
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 max-w-7xl mx-auto mb-12">
                        {services.map((service, index) => (
                            <div 
                                key={service.id} 
                                style={{ animationDelay: `${(index + 1) * 0.1}s` }} 
                                className="animate-[fadeInUp_0.8s_ease-out_forwards] opacity-0"
                            >
                                <ServiceCard option={service} />
                            </div>
                        ))}
                    </div>

                    {/* Informaci√≥n Importante */}
                    <div id="informacion" className="max-w-4xl mx-auto mb-8 animate-[fadeInUp_1.5s_ease-out_forwards]">
                        <div className="bg-white rounded-2xl shadow-xl p-6 sm:p-8 border-t-4 border-blue-600">
                            <div className="flex items-center gap-3 mb-4">
                                <div className="text-3xl sm:text-4xl">‚ÑπÔ∏è</div>
                                <h3 className="text-xl sm:text-2xl font-bold text-gray-800">
                                    Informaci√≥n Importante
                                </h3>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div className="flex items-start gap-3 bg-green-50 p-4 rounded-lg">
                                    <div className="text-2xl flex-shrink-0">üìö</div>
                                    <div>
                                        <p className="text-sm font-semibold text-gray-800">L√≠mite de cursos</p>
                                        <p className="text-xs text-gray-600 mt-1">Puedes tomar hasta 3 cursos por periodo sin empalme.</p>
                                    </div>
                                </div>
                                
                                <div className="flex items-start gap-3 bg-purple-50 p-4 rounded-lg">
                                    <div className="text-2xl flex-shrink-0">üìù</div>
                                    <div>
                                        <p className="text-sm font-semibold text-gray-800">Formatos</p>
                                        <p className="text-xs text-gray-600 mt-1">Descarga CVU y Ficha en PDF antes de inscribirte.</p>
                                    </div>
                                </div>
                                
                                <a href="aviso.html" className="flex items-start gap-3 bg-red-50 p-4 rounded-lg hover:bg-red-100 transition-colors cursor-pointer">
                                    <div className="text-2xl flex-shrink-0">üîí</div>
                                    <div>
                                        <p className="text-sm font-semibold text-gray-800">Privacidad</p>
                                        <p className="text-xs text-gray-600 mt-1">Consulta nuestro aviso de privacidad de datos.</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    {/* Enlaces Institucionales */}
                    <div id="enlaces" className="max-w-4xl mx-auto mb-8 animate-[fadeInUp_1.6s_ease-out_forwards]">
                        <div className="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl shadow-xl p-6 text-white">
                            <h3 className="text-xl font-bold mb-4 text-center">üîó Enlaces Institucionales</h3>
                            <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                                {[
                                    { icon: 'üèõÔ∏è', title: 'ITD', sub: 'Portal Principal', url: 'https://www.itdurango.edu.mx', color: 'bg-sky-500' },
                                    { icon: 'üéì', title: 'TecNM', sub: 'Sitio Nacional', url: 'https://www.tecnm.mx', color: 'bg-emerald-500' },
                                    { icon: 'üíª', title: 'MOOC', sub: 'Cursos en L√≠nea', url: 'https://mooc.tecnm.mx/portal/', color: 'bg-purple-500' },
                                    { icon: 'üìÇ', title: 'SGI', sub: 'Gesti√≥n Integrado', url: 'https://www.itdurango.edu.mx/sgi/', color: 'bg-rose-500' }
                                ].map((link) => (
                                    <a 
                                        key={link.title}
                                        href={link.url}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        className={`${link.color} bg-opacity-80 hover:bg-opacity-100 rounded-lg p-4 text-center transition-all transform hover:scale-105 shadow-lg`}
                                    >
                                        <div className="text-3xl mb-2">{link.icon}</div>
                                        <p className="font-semibold text-sm">{link.title}</p>
                                        <p className="text-xs opacity-90">{link.sub}</p>
                                    </a>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Contacto y Admin Trigger */}
                    <div id="contacto" className="max-w-4xl mx-auto mt-8 animate-[fadeInUp_1.7s_ease-out_forwards]">
                        <div className="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl shadow-xl p-6 text-white">
                            <div className="flex flex-col sm:flex-row items-center justify-between gap-6 text-center sm:text-left">
                                <div className="flex items-center gap-4">
                                    <div className="text-4xl hidden sm:block">üí¨</div>
                                    <div>
                                        <h3 className="text-lg font-bold">¬øNecesitas Ayuda?</h3>
                                        <p className="text-sm opacity-90">Contacta a la Coordinaci√≥n de Actualizaci√≥n Docente.</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-4">
                                    {/* --- AQU√ç EST√Å EL GATILLO DE ADMINISTRADOR --- */}
                                    <img 
                                        src="https://raw.githubusercontent.com/DA-itd/web/main/logo_itdurango.png" 
                                        alt="ITD Admin Access" 
                                        className="h-12 w-auto cursor-pointer hover:opacity-80 transition-opacity bg-white/20 p-1 rounded hover:bg-white/30"
                                        onClick={handleAdminTrigger}
                                        title="Acceso Administrativo (Click)"
                                    />
                                    <a href="mailto:desarrollo.academico@itdurango.edu.mx" 
                                       className="w-full sm:w-auto flex-shrink-0 inline-flex items-center justify-center bg-white text-blue-600 font-bold px-5 py-2 rounded-lg hover:bg-gray-100 transition-colors shadow-md">
                                        <span className="mr-2">üìß</span> Enviar Email
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Home />);
    </script>
</body>
</html>
